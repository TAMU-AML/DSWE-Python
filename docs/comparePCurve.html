<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ComparePCurve &mdash; DSWE 0.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CovMatch" href="covmatch.html" />
    <link rel="prev" title="BayesTreePowerCurve" href="bayes_tree.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> DSWE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting Started with DSWE</a></li>
<li class="toctree-l1"><a class="reference internal" href="AMK.html">AMK</a></li>
<li class="toctree-l1"><a class="reference internal" href="bayes_tree.html">BayesTreePowerCurve</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ComparePCurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="covmatch.html">CovMatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="dnn.html">DNNPowerCurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="funGP.html">FunGP</a></li>
<li class="toctree-l1"><a class="reference internal" href="knn.html">KNNPowerCurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="svm.html">SVMPowerCurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="tempGP.html">TempGP</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Jupyter Notebooks</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DSWE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>ComparePCurve</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/comparePCurve.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="comparepcurve">
<h1>ComparePCurve<a class="headerlink" href="#comparepcurve" title="Permalink to this headline"></a></h1>
<p>Power curve comparison and uncertainity quantification.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dwse</span> <span class="kn">import</span> <span class="n">ComparePCurve</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ComparePCurve</span><span class="p">(</span><span class="n">Xlist</span><span class="p">,</span> <span class="n">ylist</span><span class="p">,</span> <span class="n">testcol</span><span class="p">)</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">compute_weighted_difference</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
</pre></div>
</div>
<span class="target" id="module-dswe.comparePCurve"></span><dl class="py class">
<dt class="sig sig-object py" id="dswe.comparePCurve.ComparePCurve">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">dswe.comparePCurve.</span></span><span class="sig-name descname"><span class="pre">ComparePCurve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circ_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conf_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[50,</span> <span class="pre">50]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L-BFGS-B'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'band_size':</span> <span class="pre">5000,</span> <span class="pre">'optim_size':</span> <span class="pre">500}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dswe/comparePCurve.html#ComparePCurve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dswe.comparePCurve.ComparePCurve" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Xlist</strong> (<em>list</em>) – A list, consisting of data sets to match, also each of the individual data set can be
a matrix with each column corresponding to one input variable.</p></li>
<li><p><strong>ylist</strong> (<em>list</em>) – A list, consisting of data sets to match, and each list is an array that corresponds to target
values of the data sets.</p></li>
<li><p><strong>testcol</strong> (<em>list</em>) – A list stating column number of covariates to used in generating test set.
Maximum of two columns to be used.</p></li>
<li><p><strong>testset</strong> (<em>np.array</em>) – Test points at which the functions will be compared.
Default is set to None, means calculate at the runtime.</p></li>
<li><p><strong>circ_pos</strong> (<em>list</em><em> or </em><em>int</em>) – A list or array stating the column position of circular variables.
An integer when only one circular variable present.
Default value is None.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em> or </em><em>list</em>) – A numerical or a list of threshold values for each covariates, against which matching happens.
It should be a single value or a list of values representing threshold for each of the covariate.
Default value is 0.2.</p></li>
<li><p><strong>conf_level</strong> (<em>float</em>) – A single value representing the statistical significance level for constructing the band.
Default value is 0.95.</p></li>
<li><p><strong>grid_size</strong> (<em>list</em>) – A list or numpy array to be used in constructing test set, should be provided when
testset is None, else it is ignored. Default is [50,50] for 2-dim input which
is converted internally to a default of [1000] for 1-dim input. Total number of
test points (product of grid_size elements components) must be less than or equal
to 2500.</p></li>
<li><p><strong>power_bins</strong> (<em>int</em>) – A integer stating the number of power bins for computing the scaled difference.
Default value is 15.</p></li>
<li><p><strong>bseline</strong> (<em>int</em>) – An integer between 0 to 2, where 1 indicates to use power curve of first dataset
as the base for metric calculation, 2 indicates to use the power curve of second
dataset as the base, and 0 indicates to use the average of both power curves as
the base. Default is set to 1.</p></li>
<li><p><strong>limit_memory</strong> (<em>bool</em>) – A boolean (True/False) indicating whether to limit the memory use or not.
Default is True. If set to True, 5000 datapoints are randomly sampled
from each dataset under comparison for inference.</p></li>
<li><p><strong>opt_method</strong> (<em>string</em>) – A string specifying the optimization method to be used for hyperparameter
estimation. The best working solver are [‘L-BFGS-B’, ‘BFGS’].
Default is set to ‘L-BFGS-B’.</p></li>
<li><p><strong>sample_size</strong> (<em>dict</em>) – A dictionary with two keys: optim_size and band_size, denoting the sample size for each dataset for
hyperparameter optimization and confidence band computation, respectively, when limit_memory = TRUE.
Default value is list(optim_size = 500,band_size = 5000).</p></li>
<li><p><strong>rng_seed</strong> (<em>int</em>) – Random number genrator (rng) seed for sampling data when limit_memory = TRUE. Default value is 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>self with trained parameters.</p>
<ul class="simple">
<li><p>weighted_diff: a numeric, % difference between the functions weighted using the density of the covariates.</p></li>
<li><p>weighted_stat_diff: a numeric, % statistically significant difference between the functions weighted using the density of the covariates.</p></li>
<li><p>scaled_diff: a numeric, % difference between the functions scaled to the orginal data.</p></li>
<li><p>scaled_stat_diff: a numeric, % statistically significant difference between the functions scaled to the orginal data.</p></li>
<li><p>unweighted_diff: a numeric, % difference between the functions unweighted.</p></li>
<li><p>unweighted_stat_diff: a numeric, % statistically significant difference between the functions unweighted.</p></li>
<li><p>reduction_ratio: a list consisting of shrinkage ratio of features used in testset.</p></li>
<li><p>mu1: An array of test prediction for first data set.</p></li>
<li><p>mu2: An array of test prediction for second data set.</p></li>
<li><p>mu_diff: An array of pointwise difference between the predictions from the two datasets (mu2-mu1).</p></li>
<li><p>band: An array of the allowed statistical difference between functions at testpoints in testset.</p></li>
<li><p>conf_level: A numeric representing the statistical significance level for constructing the band.</p></li>
<li><p>estimated_params: A list of estimated hyperparameters for GP.</p></li>
<li><p>testset: an array/matrix of the test points either provided by user, or generated internally.</p></li>
<li><p>matched_data_X: a list of features of two matched datasets as generated by covariate matching.</p></li>
<li><p>matched_data_y: a list of target of two matched datasets as generated by covariate matching.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#dswe.comparePCurve.ComparePCurve" title="dswe.comparePCurve.ComparePCurve">ComparePCurve</a></p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dswe.comparePCurve.ComparePCurve.compute_weighted_difference">
<span class="sig-name descname"><span class="pre">compute_weighted_difference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat_diff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dswe/comparePCurve.html#ComparePCurve.compute_weighted_difference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dswe.comparePCurve.ComparePCurve.compute_weighted_difference" title="Permalink to this definition"></a></dt>
<dd><p>Computes percentage weighted difference between power curves based on user provided weights
instead of the weights computed from the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> (<em>list</em>) – a list of user specified weights for each element of mu_diff. It can be based
on any probability distribution of user choice. The weights must sum to 1.</p></li>
<li><p><strong>baseline</strong> (<em>int</em>) – An integer between 1 to 2, where 1 indicates to use mu1 predictions from the power curve and
2 indicates to use mu2 predictions from the power curve as obtained from ComparePCurve() function.
The mu1 and mu2 corresponds to test prediction for first and second data set respectively.
Default is set to 1.</p></li>
<li><p><strong>stat_diff</strong> (<em>bool</em>) – a boolean (True/False) specifying whether to compute the statistical significant difference or not.
Default is set to False, i.e. statistical significant difference is not computed.
If set to true, band generated from ComparePCurve() function to be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numeric percentage weighted difference or statistical significant percetage weighted difference
based on whether statDiff is set to False or True.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="admonition-reference admonition">
<p class="admonition-title">Reference</p>
<p>Ding, Kumar, Prakash, Kio, Liu, Liu, and Li, 2021,
“A case study of space-time performance comparison of
wind turbines on a wind farm,” Renewable Energy, Vol. 171, pp. 735-746.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bayes_tree.html" class="btn btn-neutral float-left" title="BayesTreePowerCurve" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="covmatch.html" class="btn btn-neutral float-right" title="CovMatch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Pratyush Kumar, Abhinav Prakash, and Yu Ding.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>